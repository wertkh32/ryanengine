#pragma once

#include "platform.h"

#if USE( DX12_API )

// interfaces
typedef ID3D12Debug					gfx_debug_t;
typedef ID3D12Device				gfx_device_t;
typedef ID3D12CommandList			cmdlist_t;
typedef ID3D12GraphicsCommandList	gfx_cmdlist_t;
typedef ID3D12CommandAllocator		gfx_cmdlist_alloc_t;
typedef ID3D12PipelineState			gfx_pipeline_state_t;
typedef ID3D12CommandQueue			gfx_cmdqueue_t;
typedef IDXGIAdapter1				gfx_adapter_t;
typedef IDXGISwapChain1				gfx_swapchain1_t;
typedef IDXGISwapChain2				gfx_swapchain2_t;
typedef IDXGISwapChain3				gfx_swapchain_t;
typedef IDXGIFactory4				gfx_factory_t;
typedef ID3D12DescriptorHeap		gfx_descheap_t;
typedef ID3D12Resource				gfx_resource_t;
typedef ID3D12CommandAllocator		gfx_cmdalloc_t;
typedef ID3D12RootSignature			gfx_rootsignature_t;
typedef ID3DBlob					gfx_memblob_t;
typedef ID3D12Fence					gfx_fence_t;
typedef ID3D12InfoQueue				gfx_info_queue_t;
typedef ID3D12Heap					gfx_heap_t;

// types
typedef D3D12_COMMAND_LIST_TYPE				gfx_cmdlist_type_t;
typedef D3D12_CPU_DESCRIPTOR_HANDLE			gfx_desc_handle_t;
typedef D3D12_DESCRIPTOR_RANGE				gfx_desc_range_t;
typedef D3D12_ROOT_DESCRIPTOR_TABLE			gfx_desc_table_t;
typedef D3D12_ROOT_PARAMETER				gfx_root_parameter_t;
typedef D3D12_INPUT_ELEMENT_DESC			gfx_input_desc_t;
typedef D3D12_GRAPHICS_PIPELINE_STATE_DESC	gfx_pipeline_desc_t;
typedef D3D12_VERTEX_BUFFER_VIEW			gfx_vert_buffer_view_t;
typedef D3D12_INDEX_BUFFER_VIEW				gfx_index_buffer_view_t;
typedef D3D12_RESOURCE_DESC					gfx_resource_desc_t;
typedef D3D12_HEAP_DESC						gfx_heap_desc_t;
typedef UINT64								uint64_t;
typedef HANDLE								gfx_fence_event_t;

typedef D3D12_VIEWPORT						gfx_viewport_t;
typedef D3D12_RECT							gfx_rect_t;
typedef D3D12_RESOURCE_STATES				gfx_resource_state_t;


enum GFX_FORMAT
{
	GFX_FORMAT_UNKNOWN						= DXGI_FORMAT_UNKNOWN,
	GFX_FORMAT_R32G32B32A32_TYPELESS		= DXGI_FORMAT_R32G32B32A32_TYPELESS,
	GFX_FORMAT_R32G32B32A32_FLOAT			= DXGI_FORMAT_R32G32B32A32_FLOAT,
	GFX_FORMAT_R32G32B32A32_UINT 			= DXGI_FORMAT_R32G32B32A32_UINT,
	GFX_FORMAT_R32G32B32A32_SINT 			= DXGI_FORMAT_R32G32B32A32_SINT,
	GFX_FORMAT_R32G32B32_TYPELESS			= DXGI_FORMAT_R32G32B32_TYPELESS,
	GFX_FORMAT_R32G32B32_FLOAT 				= DXGI_FORMAT_R32G32B32_FLOAT,
	GFX_FORMAT_R32G32B32_UINT 				= DXGI_FORMAT_R32G32B32_UINT,
	GFX_FORMAT_R32G32B32_SINT 				= DXGI_FORMAT_R32G32B32_SINT,
	GFX_FORMAT_R16G16B16A16_TYPELESS		= DXGI_FORMAT_R16G16B16A16_TYPELESS,
	GFX_FORMAT_R16G16B16A16_FLOAT			= DXGI_FORMAT_R16G16B16A16_FLOAT,
	GFX_FORMAT_R16G16B16A16_UNORM			= DXGI_FORMAT_R16G16B16A16_UNORM,
	GFX_FORMAT_R16G16B16A16_UINT			= DXGI_FORMAT_R16G16B16A16_UINT,
	GFX_FORMAT_R16G16B16A16_SNORM			= DXGI_FORMAT_R16G16B16A16_SNORM,
	GFX_FORMAT_R16G16B16A16_SINT			= DXGI_FORMAT_R16G16B16A16_SINT,
	GFX_FORMAT_R32G32_TYPELESS				= DXGI_FORMAT_R32G32_TYPELESS,
	GFX_FORMAT_R32G32_FLOAT					= DXGI_FORMAT_R32G32_FLOAT,
	GFX_FORMAT_R32G32_UINT					= DXGI_FORMAT_R32G32_UINT,
	GFX_FORMAT_R32G32_SINT					= DXGI_FORMAT_R32G32_SINT,
	GFX_FORMAT_R32G8X24_TYPELESS			= DXGI_FORMAT_R32G8X24_TYPELESS,
	GFX_FORMAT_D32_FLOAT_S8X24_UINT			= DXGI_FORMAT_D32_FLOAT_S8X24_UINT,
	GFX_FORMAT_R32_FLOAT_X8X24_TYPELESS		= DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS,
	GFX_FORMAT_X32_TYPELESS_G8X24_UINT		= DXGI_FORMAT_X32_TYPELESS_G8X24_UINT,
	GFX_FORMAT_R10G10B10A2_TYPELESS			= DXGI_FORMAT_R10G10B10A2_TYPELESS,
	GFX_FORMAT_R10G10B10A2_UNORM			= DXGI_FORMAT_R10G10B10A2_UNORM,
	GFX_FORMAT_R10G10B10A2_UINT				= DXGI_FORMAT_R10G10B10A2_UINT,
	GFX_FORMAT_R11G11B10_FLOAT				= DXGI_FORMAT_R11G11B10_FLOAT,
	GFX_FORMAT_R8G8B8A8_TYPELESS			= DXGI_FORMAT_R8G8B8A8_TYPELESS,
	GFX_FORMAT_R8G8B8A8_UNORM				= DXGI_FORMAT_R8G8B8A8_UNORM,
	GFX_FORMAT_R8G8B8A8_UNORM_SRGB			= DXGI_FORMAT_R8G8B8A8_UNORM_SRGB,
	GFX_FORMAT_R8G8B8A8_UINT				= DXGI_FORMAT_R8G8B8A8_UINT,
	GFX_FORMAT_R8G8B8A8_SNORM				= DXGI_FORMAT_R8G8B8A8_SNORM,
	GFX_FORMAT_R8G8B8A8_SINT				= DXGI_FORMAT_R8G8B8A8_SINT,
	GFX_FORMAT_R16G16_TYPELESS				= DXGI_FORMAT_R16G16_TYPELESS,
	GFX_FORMAT_R16G16_FLOAT					= DXGI_FORMAT_R16G16_FLOAT,
	GFX_FORMAT_R16G16_UNORM					= DXGI_FORMAT_R16G16_UNORM,
	GFX_FORMAT_R16G16_UINT					= DXGI_FORMAT_R16G16_UINT,
	GFX_FORMAT_R16G16_SNORM					= DXGI_FORMAT_R16G16_SNORM,
	GFX_FORMAT_R16G16_SINT					= DXGI_FORMAT_R16G16_SINT,
	GFX_FORMAT_R32_TYPELESS					= DXGI_FORMAT_R32_TYPELESS,
	GFX_FORMAT_D32_FLOAT					= DXGI_FORMAT_D32_FLOAT,
	GFX_FORMAT_R32_FLOAT					= DXGI_FORMAT_R32_FLOAT,
	GFX_FORMAT_R32_UINT						= DXGI_FORMAT_R32_UINT,
	GFX_FORMAT_R32_SINT						= DXGI_FORMAT_R32_SINT,
	GFX_FORMAT_R24G8_TYPELESS				= DXGI_FORMAT_R24G8_TYPELESS,
	GFX_FORMAT_D24_UNORM_S8_UINT			= DXGI_FORMAT_D24_UNORM_S8_UINT,
	GFX_FORMAT_R24_UNORM_X8_TYPELESS		= DXGI_FORMAT_R24_UNORM_X8_TYPELESS,
	GFX_FORMAT_X24_TYPELESS_G8_UINT			= DXGI_FORMAT_X24_TYPELESS_G8_UINT,
	GFX_FORMAT_R8G8_TYPELESS				= DXGI_FORMAT_R8G8_TYPELESS,
	GFX_FORMAT_R8G8_UNORM					= DXGI_FORMAT_R8G8_UNORM,
	GFX_FORMAT_R8G8_UINT					= DXGI_FORMAT_R8G8_UINT,
	GFX_FORMAT_R8G8_SNORM					= DXGI_FORMAT_R8G8_SNORM,
	GFX_FORMAT_R8G8_SINT					= DXGI_FORMAT_R8G8_SINT,
	GFX_FORMAT_R16_TYPELESS					= DXGI_FORMAT_R16_TYPELESS,
	GFX_FORMAT_R16_FLOAT					= DXGI_FORMAT_R16_FLOAT,
	GFX_FORMAT_D16_UNORM					= DXGI_FORMAT_D16_UNORM,
	GFX_FORMAT_R16_UNORM					= DXGI_FORMAT_R16_UNORM,
	GFX_FORMAT_R16_UINT						= DXGI_FORMAT_R16_UINT,
	GFX_FORMAT_R16_SNORM					= DXGI_FORMAT_R16_SNORM,
	GFX_FORMAT_R16_SINT						= DXGI_FORMAT_R16_SINT,
	GFX_FORMAT_R8_TYPELESS					= DXGI_FORMAT_R8_TYPELESS,
	GFX_FORMAT_R8_UNORM						= DXGI_FORMAT_R8_UNORM,
	GFX_FORMAT_R8_UINT						= DXGI_FORMAT_R8_UINT,
	GFX_FORMAT_R8_SNORM						= DXGI_FORMAT_R8_SNORM,
	GFX_FORMAT_R8_SINT						= DXGI_FORMAT_R8_SINT,
	GFX_FORMAT_A8_UNORM						= DXGI_FORMAT_A8_UNORM,
	GFX_FORMAT_R1_UNORM						= DXGI_FORMAT_R1_UNORM,
	GFX_FORMAT_R9G9B9E5_SHAREDEXP			= DXGI_FORMAT_R9G9B9E5_SHAREDEXP,
	GFX_FORMAT_R8G8_B8G8_UNORM				= DXGI_FORMAT_R8G8_B8G8_UNORM,
	GFX_FORMAT_G8R8_G8B8_UNORM				= DXGI_FORMAT_G8R8_G8B8_UNORM,
	GFX_FORMAT_BC1_TYPELESS					= DXGI_FORMAT_BC1_TYPELESS,
	GFX_FORMAT_BC1_UNORM					= DXGI_FORMAT_BC1_UNORM,
	GFX_FORMAT_BC1_UNORM_SRGB				= DXGI_FORMAT_BC1_UNORM_SRGB,
	GFX_FORMAT_BC2_TYPELESS					= DXGI_FORMAT_BC2_TYPELESS,
	GFX_FORMAT_BC2_UNORM					= DXGI_FORMAT_BC2_UNORM,
	GFX_FORMAT_BC2_UNORM_SRGB				= DXGI_FORMAT_BC2_UNORM_SRGB,
	GFX_FORMAT_BC3_TYPELESS					= DXGI_FORMAT_BC3_TYPELESS,
	GFX_FORMAT_BC3_UNORM					= DXGI_FORMAT_BC3_UNORM,
	GFX_FORMAT_BC3_UNORM_SRGB				= DXGI_FORMAT_BC3_UNORM_SRGB,
	GFX_FORMAT_BC4_TYPELESS					= DXGI_FORMAT_BC4_TYPELESS,
	GFX_FORMAT_BC4_UNORM					= DXGI_FORMAT_BC4_UNORM,
	GFX_FORMAT_BC4_SNORM					= DXGI_FORMAT_BC4_SNORM,
	GFX_FORMAT_BC5_TYPELESS					= DXGI_FORMAT_BC5_TYPELESS,
	GFX_FORMAT_BC5_UNORM					= DXGI_FORMAT_BC5_UNORM,
	GFX_FORMAT_BC5_SNORM					= DXGI_FORMAT_BC5_SNORM,
	GFX_FORMAT_B5G6R5_UNORM					= DXGI_FORMAT_B5G6R5_UNORM,
	GFX_FORMAT_B5G5R5A1_UNORM				= DXGI_FORMAT_B5G5R5A1_UNORM,
	GFX_FORMAT_B8G8R8A8_UNORM				= DXGI_FORMAT_B8G8R8A8_UNORM,
	GFX_FORMAT_B8G8R8X8_UNORM				= DXGI_FORMAT_B8G8R8X8_UNORM,
	GFX_FORMAT_R10G10B10_XR_BIAS_A2_UNORM	= DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM,
	GFX_FORMAT_B8G8R8A8_TYPELESS			= DXGI_FORMAT_B8G8R8A8_TYPELESS,
	GFX_FORMAT_B8G8R8A8_UNORM_SRGB			= DXGI_FORMAT_B8G8R8A8_UNORM_SRGB,
	GFX_FORMAT_B8G8R8X8_TYPELESS			= DXGI_FORMAT_B8G8R8X8_TYPELESS,
	GFX_FORMAT_B8G8R8X8_UNORM_SRGB			= DXGI_FORMAT_B8G8R8X8_UNORM_SRGB,
	GFX_FORMAT_BC6H_TYPELESS				= DXGI_FORMAT_BC6H_TYPELESS,
	GFX_FORMAT_BC6H_UF16					= DXGI_FORMAT_BC6H_UF16,
	GFX_FORMAT_BC6H_SF16					= DXGI_FORMAT_BC6H_SF16,
	GFX_FORMAT_BC7_TYPELESS					= DXGI_FORMAT_BC7_TYPELESS,
	GFX_FORMAT_BC7_UNORM					= DXGI_FORMAT_BC7_UNORM,
	GFX_FORMAT_BC7_UNORM_SRGB				= DXGI_FORMAT_BC7_UNORM_SRGB,
	GFX_FORMAT_AYUV							= DXGI_FORMAT_AYUV,
	GFX_FORMAT_Y410							= DXGI_FORMAT_Y410,
	GFX_FORMAT_Y416							= DXGI_FORMAT_Y416,
	GFX_FORMAT_NV12							= DXGI_FORMAT_NV12,
	GFX_FORMAT_P010							= DXGI_FORMAT_P010,
	GFX_FORMAT_P016							= DXGI_FORMAT_P016,
	GFX_FORMAT_420_OPAQUE					= DXGI_FORMAT_420_OPAQUE,
	GFX_FORMAT_YUY2							= DXGI_FORMAT_YUY2,
	GFX_FORMAT_Y210							= DXGI_FORMAT_Y210,
	GFX_FORMAT_Y216							= DXGI_FORMAT_Y216,
	GFX_FORMAT_NV11							= DXGI_FORMAT_NV11,
	GFX_FORMAT_AI44							= DXGI_FORMAT_AI44,
	GFX_FORMAT_IA44							= DXGI_FORMAT_IA44,
	GFX_FORMAT_P8							= DXGI_FORMAT_P8,
	GFX_FORMAT_A8P8							= DXGI_FORMAT_A8P8,
	GFX_FORMAT_B4G4R4A4_UNORM				= DXGI_FORMAT_B4G4R4A4_UNORM,
	GFX_FORMAT_P208							= DXGI_FORMAT_P208,
	GFX_FORMAT_V208							= DXGI_FORMAT_V208,
	GFX_FORMAT_V408							= DXGI_FORMAT_V408,
	GFX_FORMAT_FORCE_UINT					= DXGI_FORMAT_FORCE_UINT,
};


// to-do : no extended typed buffer formats yet
enum GFX_TBUFFER_FORMAT
{
	GFX_TBUFFER_R32_FLOAT			= DXGI_FORMAT_R32_FLOAT,
	GFX_TBUFFER_R32_UINT			= DXGI_FORMAT_R32_UINT,
	GFX_TBUFFER_R32_SINT			= DXGI_FORMAT_R32_SINT,
	GFX_TBUFFER_R32G32B32A32_FLOAT	= DXGI_FORMAT_R32G32B32A32_FLOAT,
	GFX_TBUFFER_R32G32B32A32_UINT	= DXGI_FORMAT_R32G32B32A32_UINT,
	GFX_TBUFFER_R32G32B32A32_SINT	= DXGI_FORMAT_R32G32B32A32_SINT,
	GFX_TBUFFER_R16G16B16A16_FLOAT	= DXGI_FORMAT_R16G16B16A16_FLOAT,
	GFX_TBUFFER_R16G16B16A16_UINT	= DXGI_FORMAT_R16G16B16A16_UINT,
	GFX_TBUFFER_R16G16B16A16_SINT	= DXGI_FORMAT_R16G16B16A16_SINT,
	GFX_TBUFFER_R8G8B8A8_UNORM		= DXGI_FORMAT_R8G8B8A8_UNORM,
	GFX_TBUFFER_R8G8B8A8_UINT		= DXGI_FORMAT_R8G8B8A8_UINT,
	GFX_TBUFFER_R8G8B8A8_SINT		= DXGI_FORMAT_R8G8B8A8_SINT,
	GFX_TBUFFER_R16_FLOAT			= DXGI_FORMAT_R16_FLOAT,
	GFX_TBUFFER_R16_UINT			= DXGI_FORMAT_R16_UINT,
	GFX_TBUFFER_R16_SINT			= DXGI_FORMAT_R16_SINT,
	GFX_TBUFFER_R8_UNORM			= DXGI_FORMAT_R8_UNORM,
	GFX_TBUFFER_R8_UINT				= DXGI_FORMAT_R8_UINT,
	GFX_TBUFFER_R8_SINT				= DXGI_FORMAT_R8_SINT,
};


inline uint Gfx_GetTypedBufferByteSize ( GFX_TBUFFER_FORMAT format )
{
	switch( format )
	{
		case GFX_TBUFFER_R32_FLOAT:
		case GFX_TBUFFER_R32_UINT:
		case GFX_TBUFFER_R32_SINT:
			return 4;
		case GFX_TBUFFER_R32G32B32A32_FLOAT:
		case GFX_TBUFFER_R32G32B32A32_UINT:
		case GFX_TBUFFER_R32G32B32A32_SINT:
			return 16;
		case GFX_TBUFFER_R16G16B16A16_FLOAT:
		case GFX_TBUFFER_R16G16B16A16_UINT:
		case GFX_TBUFFER_R16G16B16A16_SINT:
			return 8;
		case GFX_TBUFFER_R8G8B8A8_UNORM:
		case GFX_TBUFFER_R8G8B8A8_UINT:
		case GFX_TBUFFER_R8G8B8A8_SINT:
			return 4;
		case GFX_TBUFFER_R16_FLOAT:
		case GFX_TBUFFER_R16_UINT:
		case GFX_TBUFFER_R16_SINT:
			return 2;
		case GFX_TBUFFER_R8_UNORM:
		case GFX_TBUFFER_R8_UINT:
		case GFX_TBUFFER_R8_SINT:
			return 1;
		default:
			return 0;
	}
}

#endif 